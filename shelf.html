<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interactive Bookshelf</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        background: black;
        height: 100%;
        width: 100%;
        overflow: hidden;
    }

    #container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        background: black;
        position: relative;
    }

    .layer {
        position: absolute;
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        user-select: none;
        -webkit-user-drag: none;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: 2;
    }
</style>
</head>
<body>

<div id="container">
    <img id="scene" class="layer" src="bookshelf.png" alt="Bookshelf">
    <img id="mask" class="layer" src="bookshelfclickmap.png" style="display:none;" alt="Mask">
        <img id="highlightback" class="layer overlay" src="HiBack.png" alt="Highlight Back">
    <img id="highlightbook1" class="layer overlay" src="HIbook1.png" alt="Highlight Book 1">
</div>

<script>
const scene = document.getElementById("scene");
const mask = document.getElementById("mask");

const highlightback = document.getElementById("highlightback");
const highlightbook1 = document.getElementById("highlightbook1");

const canvas = document.createElement("canvas");
const ctx = canvas.getContext("2d");

let currentColor = "";

mask.onload = () => {
    canvas.width = mask.naturalWidth;
    canvas.height = mask.naturalHeight;
    ctx.drawImage(mask, 0, 0);
};

scene.addEventListener("mousemove", (e) => {
    const rect = scene.getBoundingClientRect();
    const x = Math.floor((e.clientX - rect.left) * (mask.naturalWidth / rect.width));
    const y = Math.floor((e.clientY - rect.top) * (mask.naturalHeight / rect.height));

    const pixel = ctx.getImageData(x, y, 1, 1).data;
    currentColor = `${pixel[0]},${pixel[1]},${pixel[2]}`;

    highlightback.style.opacity = 0;
    highlightbook1.style.opacity = 0;

    if (currentColor === "255,255,0") highlightback.style.opacity = 1;
    if (currentColor === "0,0,255") highlightbook1.style.opacity = 1;
});

scene.addEventListener("click", (e) => {
    const rect = scene.getBoundingClientRect();
    const x = Math.floor((e.clientX - rect.left) * (mask.naturalWidth / rect.width));
    const y = Math.floor((e.clientY - rect.top) * (mask.naturalHeight / rect.height));

    const pixel = ctx.getImageData(x, y, 1, 1).data;
    const clickedColor = `${pixel[0]},${pixel[1]},${pixel[2]}`;

    if (clickedColor === "255,255,0") {
        window.location.href = "index.html";
    }
    if (clickedColor === "0,0,255") {
        window.location.href = "board.html";
    }
});
</script>

</body>
</html>
